server_name: 'bergman.house'
pid_file: /homeserver.pid
public_baseurl: 'https://matrix.bergman.house/'
log_config: '/data/bergman.house.log.config'
report_stats: true
enable_registration: false

# (0.0.0.0 and :: are always blacklisted, whether or not they are explicitly
# listed here, since they correspond to unroutable addresses.)
federation_ip_range_blacklist:
  - '127.0.0.0/8'
  - '10.0.0.0/8'
  - '172.16.0.0/12'
  - '192.168.0.0/16'
  - '100.64.0.0/10'
  - '169.254.0.0/16'
  - '::1/128'
  - 'fe80::/64'
  - 'fc00::/7'

listeners:
  # Non-secure HTTP listener for when matrix traffic passes through a
  # reverse proxy that unwraps TLS
  - port: 8008
    tls: false
    bind_addresses: ['0.0.0.0']
    type: http
    x_forwarded: true

    resources:
      - names: [client, federation]
        compress: false

# We handle certificate provisioning at the reverse proxy
acme:
  enabled: false

database:
  name: 'sqlite3'
  args:
    database: '/data/homeserver.db'

media_store_path: '/data/media_store'
uploads_path: '/data/uploads'
#max_upload_size: 10M
#max_image_pixels: 32M

# A secret used to sign access tokens. If none is specified, the
# registration_shared_secret is used, if one is given; otherwise, a
# secret key is derived from the signing key.
#
macaroon_secret_key: '{{with secret "secret/synapse"}}{{.Data.macaroon_secret_key}}{{end}}'

# A secret which is used to calculate HMACs for form values.  Must be
# specified for the User Consent forms to work.
#
form_secret: '{{with secret "secret/synapse"}}{{.Data.form_secret}}{{end}}'

signing_key_path: '/data/bergman.house.signing.key'

password_config:
   # Uncomment to disable password login
   #enabled: false

# Enable sending emails for password resets, notification events or
# account expiry notices
#
#email:
#   enable_notifs: false
#   smtp_host: 'localhost'
#   smtp_port: 25 # SSL: 465, STARTTLS: 587
#   smtp_user: 'exampleusername'
#   smtp_pass: 'examplepassword'
#   require_transport_security: False
#   notif_from: 'Your Friendly %(app)s Home Server <noreply@example.com>'
#   app_name: Matrix
#
#   # Enable email notifications by default
#   notif_for_new_users: True
